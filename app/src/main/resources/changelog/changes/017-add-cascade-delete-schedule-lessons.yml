databaseChangeLog:
  # Добавляем каскадное удаление для внешнего ключа между lessons и schedules
  # Если удаляется расписание, то удаляются все его уроки
  - changeSet:
      id: 20260210-1-cascade-delete-schedule-lessons
      author: geradine
      changes:
        # Сначала удаляем старое ограничение внешнего ключа
        - dropForeignKeyConstraint:
            baseTableName: lessons
            constraintName: fk_lessons_schedule
        # Затем добавляем новое с каскадным удалением
        - addForeignKeyConstraint:
            baseTableName: lessons
            baseColumnNames: schedule_id
            constraintName: fk_lessons_schedule
            referencedTableName: schedules
            referencedColumnNames: id
            onDelete: CASCADE

